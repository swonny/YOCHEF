{% extends 'base.html' %}
{% block content %}
    <form name="registerChef_1" action="{% url 'registerChef' '2' %}" method="POST" enctype="multipart/form-data" >
        {% csrf_token %}
        <div id="regiFrmWrap">
            <!-- section header -->
            <section class="regiChefSection__header">
                <div class="regiChefSection__headerContainer">
                    <h2>셰프 등록</h2>
                </div>
            </section>

            <div class="regiContent">
                <div class="regiContentContainer">
                    <!-- 셰프 등록 nav -->
                    <ul class="regiContent__navContainer">
                        <li class="regiContent__navItem">
                            <a href="#">셰프 소개</a>
                        </li>
                        <li class="regiContent__navItem">
                            <a href="">예약글 등록</a>
                        </li>
                        <li class="regiContent__navItem">
                            <a href="">출장비 등록</a>
                        </li>
                    </ul>
                    <!-- // 셰프 등록 nav -->

                    <!-- 셰프등록 셰프 정보 추가 main -->
                    <section class="chefRegifirst">
                        <article class="chefRegifirst__title">
                            <h3>셰프님에 대한 소개를 작성해주세요!</h3>
                            <p>첫 번째 예약에서만 작성하는 페이지입니다.</p>
                            <input name="title" type="text">
                            <!-- !!!!진행상황 바 추가하기 -->
                            <div></div>
                        </article>

                        <!-- 프로필 사진 등록 -->
                        <!-- !!!! 수정 필요 -->
                        <article class="chefRegifirst__input">
                            <div class="chefRegifirst__input__chefProfile">
                                <h4 class="chefProfile__title">프로필 사진 </h4>
                                <div class="chefProfile__container">
                                    <div class="chefProfile__img">
                                        {% if profileImage.attachment %}
                                        <img name="uploadImage" src="{{profileImage.attachment.url}}" style="width: 100px; height: 100px;">
                                        {% endif %}
                                        <input name="profileImage" type="file" accept="image/*">
                                    </div>
                                </div>
                            </div>
                            <p class="notice_msg">반드시 셰프님의 얼굴을 확인할 수 있는 사진으로 등록해주세요! (배경, 동물, 뒷모습 등의 사진은 승인이 불가합니다.)</p>
                        </article>
                        <!-- !!!! 수정 필요 -->
                        <!-- // 프로필 사진 등록 -->

                        <!-- 닉네임 등록 -->
                        <article class="regiMainInput">
                            <h4>닉네임</h4>
                            <div class="regiMainInput__nickname">
                                <input name="nickname" type="text" placeholder="사용하실 닉네임을 입력해주세요." value={{chef.nickname}}>
                            </div>
                        </article>
                        <!-- // 닉네임 등록 -->

                        <!-- 이력 입력 -->
                        <article class="regiMainInput">
                            <div class="regiMainInput__title">
                                <h4>이력</h4>
                                <p>셰프님과 메뉴에 대한 정보를 알 수 있는 이력을 입력해주세요!</p>
                            </div>
                            <div class="regiMainInput__spec">
                                <input name="spec" type="text" value="{{chef.spec}}">
                            </div>
                        </article>
                        <!-- // 이력 입력 -->

                        <!-- 소셜미디어 -->
                        <article class="regiMainInput">
                            <!-- 프론트 참고 - UI와 기획이 일부 달라 sns, blog, youtube로 수정하였습니다-->
                            <h4>소셜 미디어</h4>
                            <div class="regiMainInput__snsLink">
                                <input name="snsLink" type="text" placeholder="인스타그램 아이디" value="{{chef.snsLink}}">
                            </div>
                            <div class="regiMainInput__blogLink">
                                <input name="blogLink" type="text" placeholder="블로그 주소" value="{{chef.blogLink}}">
                            </div>
                            <div class="regiMainInput__youtubeLink">
                                <input name="youtubeLink" type="text" placeholder="유튜브 주소" value="{{chef.youtubeLink}}">
                           </div>
                        </article>
                        <!-- // 소셜미디어 -->
                    </section>
                    <!-- // 셰프등록 셰프 정보 추가 main -->
                </div>
            </div>
            <!-- 다음 버튼 -->
            <aside class="button">
                <div class="submitBtn"><button id="submitButton">다음</button></div>
            </aside>
        </div>
    </form>

{% endblock %}
<script>
function readImage(input) {
    const reader = new FileReader()

    reader.onload = e => {
        const previewImage = document.getElementsByName("uploadImage")[0]
        previewImage.src = e.target.result;
    }

    reader.readAsDataURL(input.files[0]);
}

const submitButton = document.getElementById("submitButton")

submitButton.addEventListner('click', () => {
    let formData = new FormData();
    const textInputs = JSON.stringify({
        pageNum : 2,
        nickname : document.getElementsByName("nickname")[0].value(),
        spec : document.getElementsByName("spec")[0].value(),
        snsLink : document.getElementsByName("snsLink")[0].value(),
        blogLink : document.getElementsByName("blogLink")[0].value(),
        youtubeLink : document.getElementsByName("youtubeLink")[0].value(),
    });

    formData.append('textInputs', textInputs);
    formData.append('profileImage', profileImage);

    sendAjax('POST', '')
})

</script>