{% extends 'base.html' %}
{% load static %}
{% block style %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/myMenu_reservation.css' %}">
{% endblock %}
{% block content %}
    <div class="my-menu">
        <section class="my-menu__reservation">
            {% include 'customer_side.html' %}
            <div class="my-menu-content">
                <!-- 등록 메뉴 없을 때 -->
                {% if not books %}
                <article class="my-menu__none">
                    <h4>등록한 셰프가 없습니다.</h4>
                    <h3>마음에 드는 셰프를 예약해주세요!</h3>
                    <a href="/postList" class="{% if category == 0 %} currentCategory{% endif %}">셰프 구경하러 가기</a>
                </article>
                <!-- // 등록 메뉴 없을 때 -->
                <!-- 예약한 메뉴 정보 -->
                {% else %}
                <article class="my-menu__content">
                    {% for book in books %}
                        <div class="content__header">
                            <h4>예약 완료</h4>
                            {% if book.paymentStatus == 3 %}
                            <p>예약취소</p>
                            {% elif book.schedule.confirmStatus == 1 %}
                            <p>승인대기</p>
                            {% elif book.schedule.confirmStatus == 2 %}
                            <p>승인완료</p>
                            {% elif book.schedule.confirmStatus == 3 %}
                            <p>승인취소</p>
                            {% endif %}
                            <div class="register-date">{{book.registerDate}}</div>
                        </div>
                        <div class="content__menu-info">
                            <div class="menu-info-wrapper">
                                <div class="content__image-wrapper">
                                    <img style="width: 180px; height: 150px;" src="{{book.postCoverImg}}" onerror="this.src='{% static 'img/default.png' %}';" alt=""><!-- 수정 필요 -->
                                    <div class="d-day">D{{book.dDay}}</div><!-- js 수정 필요 -->
                                </div>
                                <div class="content__description">
                                    <h4>{{book.schedule.post.title}}</h4>
                                    <h3>선택한 코스: {{book.course.title}}</h3>
                                    <p>코스 설명 <br><br> {{book.course.description}}</p>
                                    <p>예약 날짜: {{book.schedule.eventDate}}</p>
                                </div>
                            </div>
                            <aside class="button">
                                <button class="detail-page-button" onclick="location.href = '/detail/{{book.schedule.post.id}}';">상세페이지</button>
                                {% if book.schedule.confirmStatus == 2 %}<!-- 백수정 이후 수정 필요 -->
                                <button class="cancel-button" disabled>예약 취소</button>
                                {% else %}
                                <button class="cancel-button" name="" onclick="location.href = '/customer/registerCancel/{{book.id}}'">예약 취소</button>
                                {% endif %}
                            </aside>
                        </div>
                    {% endfor %}
                </article>
                {% endif %}
                <!-- // 예약한 메뉴 정보 -->
            </div>
        </section>
    </div>
{% endblock %}
{% block scripts %}
<script>

</script>
{% endblock %}